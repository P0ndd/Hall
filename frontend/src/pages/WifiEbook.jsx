import React, { useRef } from "react";
import HTMLFlipBook from "react-pageflip";
import LayoutComponent from "../components/Layout";
import jsPDF from "jspdf";
import html2canvas from "html2canvas";
import "./Ebook.css";

const WifiEbook = () => {
  const pages = [
    "ðŸ“– à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 1: à¹à¸™à¸°à¸™à¸³à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Wi-Fi à¹à¸¥à¸° VPN\n\nà¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸™à¸µà¹‰à¸ˆà¸°à¸Šà¹ˆà¸§à¸¢à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN à¹€à¸žà¸·à¹ˆà¸­à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Wi-Fi à¹à¸¥à¸°à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¹ˆà¸§à¸¡à¸à¸±à¸šà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¹à¸¥à¸°à¹‚à¸™à¹‰à¸•à¸šà¸¸à¹Šà¸„ à¸£à¸§à¸¡à¸–à¸¶à¸‡à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¸£à¸°à¸šà¸š LOS",
    "ðŸ’» à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 2: à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN\n\n1. à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN à¸ˆà¸²à¸à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ\n2. à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸•à¸²à¸¡à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™\n3. à¹€à¸›à¸´à¸”à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¹à¸¥à¸°à¸à¸³à¸«à¸™à¸”à¸„à¹ˆà¸²à¹€à¸šà¸·à¹‰à¸­à¸‡à¸•à¹‰à¸™à¸•à¸²à¸¡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸‚à¸­à¸‡à¸šà¸£à¸´à¸©à¸±à¸—",
    "ðŸ”’ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 3: à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ VPN à¸”à¹‰à¸§à¸¢ OpenVPN\n\n1. à¹€à¸›à¸´à¸”à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN\n2. à¹€à¸¥à¸·à¸­à¸à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸ˆà¸²à¸à¸à¹ˆà¸²à¸¢à¹„à¸­à¸—à¸µ\n3. à¸›à¹‰à¸­à¸™à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹à¸¥à¸°à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™\n4. à¸„à¸¥à¸´à¸à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹€à¸žà¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ VPN",
    "ðŸ“¶ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 4: à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Wi-Fi à¸”à¹‰à¸§à¸¢ OpenVPN\n\n1. à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸šà¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢ Wi-Fi à¸‚à¸­à¸‡à¸šà¸£à¸´à¸©à¸±à¸—\n2. à¹€à¸›à¸´à¸”à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ VPN\n3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸§à¹ˆà¸²à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸š VPN à¹à¸¥à¸° Wi-Fi à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ",
    "ðŸ–¨ï¸ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 5: à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¸œà¹ˆà¸²à¸™ Wi-Fi\n\n1. à¹€à¸›à¸´à¸”à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¹à¸¥à¸°à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸š Wi-Fi\n2. à¹„à¸›à¸—à¸µà¹ˆ Settings > Printers and Scanners à¸šà¸™à¹‚à¸™à¹‰à¸•à¸šà¸¸à¹Šà¸„\n3. à¹€à¸¥à¸·à¸­à¸à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¸—à¸µà¹ˆà¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸š Wi-Fi à¹à¸¥à¸°à¸„à¸¥à¸´à¸à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡",
    "ðŸ“± à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 6: à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹‚à¸™à¹‰à¸•à¸šà¸¸à¹Šà¸„à¸à¸±à¸š Wi-Fi\n\n1. à¹€à¸›à¸´à¸”à¹‚à¸™à¹‰à¸•à¸šà¸¸à¹Šà¸„à¹à¸¥à¸°à¹„à¸›à¸—à¸µà¹ˆ Settings > Network & Internet\n2. à¹€à¸¥à¸·à¸­à¸à¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢ Wi-Fi à¸‚à¸­à¸‡à¸šà¸£à¸´à¸©à¸±à¸—à¹à¸¥à¸°à¸›à¹‰à¸­à¸™à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™\n3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Wi-Fi à¸ªà¸³à¹€à¸£à¹‡à¸ˆ",
    "ðŸ§‘â€ðŸ’» à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 7: à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸œà¹ˆà¸²à¸™ VPN\n\n1. à¹€à¸›à¸´à¸”à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN à¸šà¸™à¹‚à¸™à¹‰à¸•à¸šà¸¸à¹Šà¸„\n2. à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ VPN à¹à¸¥à¹‰à¸§à¹„à¸›à¸—à¸µà¹ˆ Settings > Printers\n3. à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸œà¹ˆà¸²à¸™à¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢ VPN",
    "ðŸ”‘ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 8: à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸šà¸š LOS à¸œà¹ˆà¸²à¸™ VPN\n\n1. à¹€à¸›à¸´à¸”à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN à¹à¸¥à¸°à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­\n2. à¹€à¸‚à¹‰à¸²à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œà¸‚à¸­à¸‡à¸£à¸°à¸šà¸š LOS à¹‚à¸”à¸¢à¹ƒà¸Šà¹‰à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œ\n3. à¸›à¹‰à¸­à¸™à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹à¸¥à¸°à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹€à¸žà¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸šà¸š LOS",
    "âš™ï¸ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 9: à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸›à¸±à¸à¸«à¸²à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Wi-Fi\n\n1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Wi-Fi à¸§à¹ˆà¸²à¸¡à¸µà¸ªà¸±à¸à¸à¸²à¸“à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ\n2. à¸£à¸µà¸ªà¸•à¸²à¸£à¹Œà¸—à¹€à¸£à¸²à¹€à¸•à¸­à¸£à¹Œà¸«à¸²à¸à¸ªà¸±à¸à¸à¸²à¸“à¸­à¹ˆà¸­à¸™\n3. à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸šà¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢à¸­à¸·à¹ˆà¸™à¸«à¸²à¸à¸¡à¸µà¸›à¸±à¸à¸«à¸²à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Wi-Fi",
    "ðŸ”§ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 10: à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸›à¸±à¸à¸«à¸²à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ VPN\n\n1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¹‚à¸›à¸£à¹à¸à¸£à¸¡ OpenVPN à¹€à¸›à¸´à¸”à¹à¸¥à¸°à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ\n2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² VPN à¹à¸¥à¸°à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­\n3. à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¹ˆà¸²à¸¢à¹„à¸­à¸—à¸µà¸«à¸²à¸à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹„à¸”à¹‰"
  ];
  

  const flipbookRef = useRef();

  const downloadPDF = async () => {
    const pdf = new jsPDF("p", "mm", "a4");

    if (!flipbookRef.current) {
      console.error("flipbookRef.current à¹€à¸›à¹‡à¸™ null à¸«à¸£à¸·à¸­ undefined");
      return;
    }

    const book = flipbookRef.current.pageFlip();

    for (let i = 0; i < pages.length; i++) {
      book.turnToPage(i);
      await new Promise((r) => setTimeout(r, 100)); // à¸£à¸­à¹ƒà¸«à¹‰à¸«à¸™à¹‰à¸²à¹‚à¸«à¸¥à¸”à¹€à¸ªà¸£à¹‡à¸ˆ

      const page = book.getPage(i);
      if (!page || !page.element) {
        console.error(`à¹„à¸¡à¹ˆà¸žà¸šà¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¸‚à¸­à¸‡à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ ${i + 1}`);
        continue;
      }

      const canvas = await html2canvas(page.element, {
        scale: 2,
        useCORS: true,
        backgroundColor: "#fff",
      });

      const imgData = canvas.toDataURL("image/png");
      const imgWidth = 210;
      const imgHeight = (canvas.height * imgWidth) / canvas.width;

      if (i > 0) pdf.addPage();
      pdf.addImage(imgData, "PNG", 0, 0, imgWidth, imgHeight);
    }

    pdf.save("WifiVPN_Manual.pdf");
  };

  return (
    <LayoutComponent>
      <div className="ebook-container">
        <button className="download-btn" onClick={downloadPDF}>
          ðŸ“¥ Download PDF
        </button>

        <HTMLFlipBook width={400} height={600} className="flipbook" ref={flipbookRef}>
          {pages.map((content, index) => (
            <div key={index} className="page">
              <h2>{content}</h2>
              <p>à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸‚à¸­à¸‡à¸«à¸™à¹‰à¸² {index + 1}</p>
            </div>
          ))}
        </HTMLFlipBook>
      </div>
    </LayoutComponent>
  );
};

export default WifiEbook;
